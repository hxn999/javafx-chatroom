<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="600.0" prefWidth="1000.0" stylesheets="@./styles/style.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.client.chat.ChatController">

   <children>

      <!-- Left contacts/search section -->
      <VBox fx:id="contactsBox" layoutX="-4.0" layoutY="-2.0" prefHeight="610.0" prefWidth="347.0" styleClass="contact-list">
         <children>

            <!-- Search Bar -->
            <HBox alignment="CENTER" prefHeight="57.0" prefWidth="342.0" style="-fx-spacing: 5;" styleClass="accent-color">
               <children>

                  <TextField fx:id="roomId" prefHeight="43.0" prefWidth="203.0" promptText="Enter room Id" style="-fx-text-fill: black;" />
                  <Button fx:id="joinRoomBtn" mnemonicParsing="false" onAction="#joinRoomHandler" styleClass="join-btn" text="JOIN" />

               </children>
            </HBox>
            <HBox alignment="CENTER" prefHeight="57.0" prefWidth="342.0" style="-fx-spacing: 5;" styleClass="accent-color">
               <children>
                  <TextField fx:id="createRoomId" prefHeight="39.0" prefWidth="191.0" promptText="Create Room ID" style="-fx-text-fill: black;" />
                  <Button fx:id="createRoomBtn" mnemonicParsing="false" onAction="#createRoomHandler" styleClass="create-btn" text="CREATE" />

               </children>
            </HBox>

            <!-- Chat list (room members or found users) -->
            <ScrollPane fitToWidth="true" prefHeight="433.0" prefWidth="342.0">
               <content>
                  <VBox alignment="CENTER" prefHeight="389.0" prefWidth="341.0" style="-fx-spacing: 50;">
                     <children>
                        <Button fx:id="videoCallBtn" mnemonicParsing="false" onAction="#videoCallHandler" text="Video Call" />
                        <ImageView fx:id="video" fitHeight="240.0" fitWidth="320.0" pickOnBounds="true" preserveRatio="true" styleClass="video-border" />
                     </children></VBox>
               </content>
            </ScrollPane>

            <!-- User info and settings -->
            <HBox alignment="CENTER_LEFT" prefHeight="62.0" prefWidth="342.0" style="-fx-spacing: 40;" styleClass="accent-color">
               <children>
                  <ImageView fx:id="userImage" fitHeight="50.0" fitWidth="50.0" pickOnBounds="true" preserveRatio="true" styleClass="user-img">
                     <HBox.margin>
                        <Insets left="20.0" />
                     </HBox.margin>
                  </ImageView>
                  <Label fx:id="userName" styleClass="name-text" text="Your Name" textFill="WHITE" />
                  <Button fx:id="settingsButton" styleClass="settings-icon-btn">
                     <graphic>
                        <ImageView fitHeight="42.0" fitWidth="44.0" pickOnBounds="true" preserveRatio="true">
                           <image>
                              <Image url="@icons/gear_8.png" />
                           </image>
                        </ImageView>
                     </graphic>
                  </Button>
               </children>
            </HBox>
         </children>
      </VBox>

      <!-- Room Header -->
      <HBox alignment="CENTER" layoutX="343.0" prefHeight="58.0" prefWidth="662.0" style="-fx-background-color: #3b4ef7;">
         <children>
            <HBox alignment="CENTER_LEFT" prefHeight="58.0" prefWidth="262.0" spacing="10.0">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               <children>
                  <ImageView fitHeight="34.0" fitWidth="34.0">
                     <image>
                        <Image url="@icons/messenger_logo.png" />
                     </image>
                  </ImageView>
                  <Label fx:id="roomLabel" style="-fx-text-fill: white; -fx-font-size: 16px;" text="Room #" />
               </children>
            </HBox>
            <Button fx:id="leaveRoomBtn" mnemonicParsing="false" onAction="#leaveRoomHandler" styleClass="leave-btn" text="LEAVE" />

         </children>
      </HBox>

      <!-- Messages area -->
      <ScrollPane fx:id="messageScrollPane" layoutX="344.0" layoutY="59.0" prefHeight="486.0" prefWidth="656.0">
         <content>
            <VBox fx:id="messageContainer" alignment="BOTTOM_RIGHT" prefHeight="483.0" prefWidth="646.0" spacing="10.0">
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
            </VBox>
         </content>
      </ScrollPane>

      <!-- Message input -->
      <HBox alignment="CENTER" layoutX="344.0" layoutY="546.0" prefHeight="58.0" prefWidth="662.0" style="-fx-background-color: #3b4ef7; -fx-spacing: 30;">
         <children>
            <StackPane style="-fx-background-color: #007BFF; -fx-background-radius: 10; -fx-padding: 5;">
               <ImageView fx:id="VoiceSend" fitHeight="35.0" fitWidth="35.0" styleClass="voice-btn">
                  <image>
                     <Image url="@icons/voice_pic.png" />
                  </image>
               </ImageView>
            </StackPane>

            <ImageView fx:id="sendIcon" fitHeight="35.0" fitWidth="35.0" styleClass="send-btn">
               <image>
                  <Image url="@icons/icons8-photo-30.png" />
               </image>
            </ImageView>
            <TextField fx:id="messageField" prefHeight="38.0" prefWidth="391.0" promptText="Write a message..." styleClass="search-input" />
            <Button fx:id="sendButton" prefHeight="35.0" prefWidth="35.0" styleClass="send-btn">
               <graphic>
                  <ImageView fitHeight="35.0" fitWidth="35.0">
                     <image>
                        <Image url="@icons/icons8-telegram-app-50.png" />
                     </image>
                  </ImageView>
               </graphic>
            </Button>
         </children>
      </HBox>

   </children>
</AnchorPane>
